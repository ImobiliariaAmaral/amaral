</html>
<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Imobili√°ria Amaral</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body data-page="vitrine">

  <header class="topbar" id="topbar">
  <div class="topbar-inner">
    <div class="brand">
      <!-- Troca o src pelo caminho certo do seu arquivo -->
     <img
  class="brand-logo"
  id="brandLogo"
  src="./assets/file.jpg"
  data-logo-light="./assets/black.jpg"
  data-logo-dark="./assets/white.jpg"
  alt="Imobili√°ria Amaral "
/>

      <div class="brand-text">
        <div class="brand-name">Amaral Imobili√°ria</div>
        <div class="creci">CRECI: 48219-J</div>
      </div>
    </div>

    <nav class="topbar-actions">
      <a class="top-link" href="#imoveis">Im√≥veis</a>
      <a class="top-link" href="https://wa.me/5514982104567" target="_blank" rel="noopener">WhatsApp</a>

      <button class="theme-btn" id="themeToggle" type="button" aria-label="Alternar tema">
        <span class="theme-ico" aria-hidden="true">üåô</span>
      </button>
    </nav>
  </div>

  <!-- separador azul -->
  <div class="topbar-sep"></div>
</header>

<!-- bota um id no seu main/section de im√≥veis -->
<main id="imoveis">
  <!-- seu conte√∫do atual -->
</main>



  <main class="main">
    <div class="container">

      <section class="filters" aria-label="Filtros de busca">
        <div class="field-inline">
          <label for="fBusca">Busca (bairro ou t√≠tulo)</label>
          <input id="fBusca" placeholder="Ex: Centro, Casa moderna..."/>
        </div>

        <div class="field-inline">
          <label for="fTipo">Tipo</label>
          <select id="fTipo">
            <option value="todos">Todos</option>
            <option value="casa">Casa</option>
            <option value="apartamento">Apartamento</option>
            <option value="terreno">Terreno</option>
            <option value="sitio">S√≠tio</option>
            <option value="chacara">Ch√°cara</option>
          </select>
        </div>

        <div class="field-inline">
          <label for="fStatus">Status</label>
          <select id="fStatus">
            <option value="todos">Todos</option>
            <option value="disponivel">Dispon√≠vel</option>
            <option value="negociacao">Negocia√ß√£o</option>
            <option value="vendido">Vendido</option>
          </select>
        </div>
      </section>

      <section id="gridCards" class="grid-cards" aria-label="Lista de im√≥veis">
        <!-- JS -->
      </section>

      <div id="emptyState" class="subtle hidden" style="margin-top:14px; text-align:center;">
        Nenhum im√≥vel encontrado com os filtros atuais.
      </div>

    </div>
  </main>

  <!-- MODAL IM√ìVEL (VITRINE) -->
  <div class="modal-overlay" id="modalPropOverlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Detalhes do im√≥vel">
      <div class="mhead">
        <h3>Detalhes do Im√≥vel</h3>
        <div class="m-actions">
          <button class="xclose" data-close-modal="prop" title="Fechar">X</button>
        </div>
      </div>
      <div class="mbody" id="modalPropBody">
        <!-- JS -->
      </div>
    </div>
  </div>

  <script src="script.js"></script>
    
  <!-- 1) Firebase/Firestore (TEM QUE VIR PRIMEIRO) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
    import {
      getFirestore,
      collection,
      doc,
      setDoc,
      getDocs,
      deleteDoc,
      serverTimestamp,
      query,
      orderBy
    } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBAMwdQUgNuHeBuSuhfXYGEAxJbUW4MQCI",
      authDomain: "imobiliaria-amaral-b3454.firebaseapp.com",
      projectId: "imobiliaria-amaral-b3454",
      storageBucket: "imobiliaria-amaral-b3454.firebasestorage.app",
      messagingSenderId: "338475531000",
      appId: "1:338475531000:web:c1ada5b16c91b5eb80d90d"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const colImoveis = collection(db, "imoveis");

    window.DB = {
      async upsertImovel(imv) {
        const id = String(imv?.id || "").trim();
        if (!id) throw new Error("Im√≥vel sem id");

        const ref = doc(db, "imoveis", id);
        const payload = { ...imv, __updatedAt: serverTimestamp(), __createdAt: imv.__createdAt || serverTimestamp() };
        await setDoc(ref, payload, { merge: true });
        return id;
      },
      async deleteImovel(id) {
        await deleteDoc(doc(db, "imoveis", String(id)));
      },
      async listImoveis() {
        const q = query(colImoveis, orderBy("__updatedAt", "desc"));
        const snap = await getDocs(q);
        return snap.docs.map(d => ({ id: d.id, ...d.data() }));
      }
    };

    console.log("Firebase/Firestore OK ‚úÖ");
  </script>

  <!-- 2) Seu script (DEPOIS do Firebase) -->
  <script src="./script.js" defer></script>
</body>
</html>
